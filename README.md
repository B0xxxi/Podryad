# Podryad

Приложение для поиска информации о подрядчиках по городам.

## Функции

- Авторизация по паролю и ключ-файлу (JSON).
- Полнотекстовый поиск по названию города.
- Просмотр подробной информации: монтажники, сисадмины, флаги DDX и МЮЗ.
- Админ-панель: импорт XLSX, ручное добавление записей, просмотр логов.
- Тёмная/светлая тема с переключателем и автоподбором.

## Установка

1. Скопируйте репозиторий и перейдите в папку проекта:
   ```bash
   git clone <url> podryad
   cd podryad
   ```
2. Установите зависимости:
   ```bash
   npm install
   ```
3. Создайте файл `.env` в корне проекта со следующими переменными:
   ```dotenv
   ADMIN_PASSWORD=ваш_пароль
   KEY_FILE_SECRET=секрет_ключа
   SESSION_SECRET=секрет_сессии
   PORT=3000
   ```
4. Создайте папку `data/` для хранения SQLite (если ещё нет):
   ```bash
   mkdir data
   ```

## Запуск

Запустите сервер:
```bash
node app.js
```
Откройте в браузере http://localhost:3000

## Структура маршрутов

- `/` – редирект на `/login` или `/search`.
- `/login` – вход по паролю или ключ-файлу.
- `/search` – поиск по городу (требует авторизации).
- `/city/:id` – подробная информация о городе.
- `/admin` – админ-панель:
  - `/admin/upload` – импорт XLSX-файла.
  - `/admin/add` – ручное добавление записей.
  - `/admin/logs` – просмотр логов.
- `/logout` – выход.

## Формат XLSX

В файле должны быть столбцы:
- `Город` – название города.
- `Монтажники` – список через запятую (может быть пусто).
- `Сисадмины` – список через запятую.
- `DDX` – `Да` или пусто (используется как булево).
- `МЮЗ` – `Да` или пусто.

## Лицензия

MIT 